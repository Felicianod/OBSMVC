@model  OBSMVC.Models.qatTags

@* ===== THIS PARTIAL VIES REPRESENTS A SINGLE QUESTION ANSWER TYPE TO BE USED FOR QUESTION VIEW/MAINTENANCE MODE ======= *@

@{var uniqueCounter = @Model.uniqueCounter.ToString("00");
  var qbtnSaveId = "btnSave" + uniqueCounter;
  //var qbtnSaveIdHandle = "#btnSave" + uniqueCounter;
  
  
var hidden_field = "currentSelectedQAT" + Model.uniqueCounter;
var dropdown_id = "AssignedAnswers" + Model.uniqueCounter;
var dropdown2 = "#AssignedAnswers" + Model.uniqueCounter;
var rowInfo = Model.uniqueCounter.ToString();
}



<div class="col-sm-12" style="border:solid; border-width:1px; font-family:Arial">
    <div class="row">
        <div class="col-sm-4 form-inline">
            <span class="label label-primary">[ @uniqueCounter ]&nbsp;</span>
            <div class="input-group">
                <span class="input-group-addon label-primary" style="color:white">Answer Type:</span>
                <input type="text" class="form-control" id="qat" value="@Model.answer_type_name" readonly="readonly">
            </div>
        </div>

        <div class="col-sm-3 col-sm-offset-5 form-inline" style="text-align:right">
            <span class="">Default:</span>
            @if (Model.QAT.obs_qat_default_ans_type_yn == "Y")
            { <button type="button" class="btn btnAdd btnIsDefault">YES&nbsp;&nbsp;<span class="glyphicon glyphicon-thumbs-up"></span></button> }
            else
            { <button type="button" class="btn btnIsDefault btn-warning">NO&nbsp;&nbsp;<span class="glyphicon glyphicon-thumbs-down"></span></button> }

            <input type="checkbox" @if (Model.QAT.obs_qat_default_ans_type_yn == "Y") { <text> checked="checked" </text>     }
                   class="form-control primar chkDefault" id="qatDefault" name="qatDefault" style="max-width:20%" />
        </div>
    </div>

    <div class="row" id="selAnsLabels">
        @if (Model.selectable_ans_required == "Y")
        {
            <ul>
                @foreach (var x in Model.selAns)
                {
                    <li style="display: inline"><span class="badge">@x.obs_qsa_text</span></li>
                }
            </ul>
        }
        else
        { <TEXT>This Question does not require Selectable answers</TEXT>}
    </div>
    <div class="row" id="selAnsTextBx" style="display:none">
                @foreach (var x in Model.selAns)
                {
                    <input type="text" value="@x.obs_qsa_text" class="form-control" />
                }
    </div>
    @if (Model.selectable_ans_required == "Y")
    {
        <div class="row form-inline">
            <div class="col-sm-3 col-sm-offset-1">
                <button id="abc" type="button" onclick="editSelAns()">Change Answer Values</button>
            </div>
        </div>
    }

    <div class="row form-inline">
        <div class="col-sm-3 col-sm-offset-1">
            <button id="@qbtnSaveId" type="button" >SAVE</button>
        </div>
    </div>

</div>

<script>
    function editSelAns() {
        alert('You are about to Edit the Selectable Answers');
        //$('#selAnsLabels').hide;
        //$('#selAnsTextBx').show;
    }



</script>

<script type="text/jscript">
    var qbtnSaveIdHandle = "#" + '@qbtnSaveId';
    $(qbtnSaveIdHandle).click(function () {
        alert('SAVING DATA ... ');
        var $btn = $(this);
        $btn.button('loading');

        // ------------ Make the Ajax Call ---------------------------------------------
        $.ajax({
            url: '@Url.Action("saveSelAnsDefault", "Question")',
            method: "POST",
            cache: false,
            data: {qat_id : 1061, sel_ans_list :"YES, NO", isDefault: true },     //<---- Data Parameters (if not already passed in the Url)
            //data: JSON.stringify({ 'Options': someData }),           //<--- In case we wanted to post a JSON data object
            //dataType: "json",                                        //<--- In case we wanted to post a JSON data object
            //contentType: "application/json; charset=utf-8",          //<--- In case we wanted to post a JSON data object
            //traditional: true,                                       //<--- In case we wanted to post a JSON data object

            //--- On error, execute this function ------
            error: function () {
                alert("An Error has Occurred. Unable to Save Data!!");  //<-- Trap and alert of any errors if they occurred
                $btn.button('reset');
            }
        }).done(function (d) {
            //Execute this code After the Ajax call completes successfully
            //$("#accordion").append(d);
            alert('Save Resullt: ' + d)
            $btn.button('reset');
        });
    })

</script>